# Copyright (C) 2024 Roberto Rossini <roberros@uio.no>
#
# SPDX-License-Identifier: MIT

[balance]

files = [
    { uri = "cooler/ENCFF993FGR.2500000.cool", format = "cool" },
    { uri = "cooler/multires_cooler_test_file.mcool", format = "mcool" },
    { uri = "cooler/single_cell_cooler_test_file.scool", format = "scool" },
    { uri = "cooler/cooler_variable_bins_test_file.cool", format = "cool", variable-bin-size = true },
    { uri = "hic/ENCFF993FGR.2500000.hic", format = "hic" }
]

test-cases = [
    { uri = "cooler/ENCFF993FGR.2500000.cool" },
    { uri = "cooler/ENCFF993FGR.2500000.cool", args = { in-memory = "" } },
    { uri = "cooler/multires_cooler_test_file.mcool", no-validate-weights = true },
    { uri = "cooler/multires_cooler_test_file.mcool", no-validate-weights = true, args = { in-memory = "" } },
    { uri = "cooler/single_cell_cooler_test_file.scool", expect-failure = true },
    { uri = "cooler/cooler_variable_bins_test_file.cool", expect-failure = true },
    { uri = "hic/ENCFF993FGR.2500000.hic", reference-uri = "cooler/ENCFF993FGR.2500000.cool", args = { tolerance = 1.0e-4 } },
    { uri = "hic/ENCFF993FGR.2500000.hic", reference-uri = "cooler/ENCFF993FGR.2500000.cool", args = { tolerance = 1.0e-4, in-memory = "" } }
]


[convert]

files = [
    { uri = "integration_tests/4DNFIZ1ZVXC8.mcool::/resolutions/100000", format = "cool" },
    { uri = "integration_tests/4DNFIZ1ZVXC8.mcool", format = "mcool" },
    { uri = "cooler/single_cell_cooler_test_file.scool", format = "scool" },
    { uri = "cooler/cooler_variable_bins_test_file.cool", format = "cool", variable-bin-size = true },
    { uri = "hic/4DNFIZ1ZVXC8.hic9", format = "hic", reference-uri = "integration_tests/4DNFIZ1ZVXC8.mcool" }
]

test-cases = [
    { input-uri = "integration_tests/4DNFIZ1ZVXC8.mcool::/resolutions/100000", format = "cool", output = "test.cool", expect-failure = true },
    { input-uri = "integration_tests/4DNFIZ1ZVXC8.mcool::/resolutions/100000", format = "cool", output = "test.mcool", expect-failure = true },
    { input-uri = "integration_tests/4DNFIZ1ZVXC8.mcool::/resolutions/100000", format = "cool", output = "test.hic", expect-failure = false },
    { input-uri = "integration_tests/4DNFIZ1ZVXC8.mcool::/resolutions/100000", format = "cool", output = "test.hic", expect-failure = false, args = { resolutions = [100000] } },
    { input-uri = "integration_tests/4DNFIZ1ZVXC8.mcool::/resolutions/100000", format = "cool", output = "test.hic", expect-failure = true, args = { resolutions = [9999999] } },
    { input-uri = "integration_tests/4DNFIZ1ZVXC8.mcool", format = "mcool", output = "test.cool", expect-failure = true },
    { input-uri = "integration_tests/4DNFIZ1ZVXC8.mcool", format = "mcool", output = "test.mcool", expect-failure = true },
    { input-uri = "integration_tests/4DNFIZ1ZVXC8.mcool", format = "mcool", output = "test.hic", expect-failure = false, args = { resolutions = [1000000, 2500000] } },
    { input-uri = "integration_tests/4DNFIZ1ZVXC8.mcool", format = "mcool", output = "test.hic", expect-failure = true, args = { resolutions = [999999, 1000000, 2500000] } },
    { input-uri = "cooler/single_cell_cooler_test_file.scool", format = "scool", output = "test.cool", expect-failure = true },
    { input-uri = "cooler/single_cell_cooler_test_file.scool", format = "scool", output = "test.mcool", expect-failure = true },
    { input-uri = "cooler/single_cell_cooler_test_file.scool", format = "scool", output = "test.hic", expect-failure = true },
    { input-uri = "cooler/cooler_variable_bins_test_file.cool", format = "cool", output = "test.cool", expect-failure = true },
    { input-uri = "cooler/cooler_variable_bins_test_file.cool", format = "cool", output = "test.mcool", expect-failure = true },
    { input-uri = "cooler/cooler_variable_bins_test_file.cool", format = "cool", output = "test.hic", expect-failure = true },
    { input-uri = "hic/4DNFIZ1ZVXC8.hic9", reference-uri = "integration_tests/4DNFIZ1ZVXC8.mcool", format = "hic", output = "test.cool", expect-failure = true },
    { input-uri = "hic/4DNFIZ1ZVXC8.hic9", format = "hic", output = "test.cool", expect-failure = false, args = { resolutions = [2500000] } },
    { input-uri = "hic/4DNFIZ1ZVXC8.hic9", format = "hic", output = "test.mcool", expect-failure = false, args = { resolutions = [1000000, 2500000] } },
    { input-uri = "hic/4DNFIZ1ZVXC8.hic9", reference-uri = "integration_tests/4DNFIZ1ZVXC8.mcool", format = "hic", output = "test.mcool", expect-failure = true, args = { resolutions = [999999, 1000000, 2500000] } },
    { input-uri = "hic/4DNFIZ1ZVXC8.hic9", reference-uri = "integration_tests/4DNFIZ1ZVXC8.mcool", format = "hic", output = "test.mcool", expect-failure = true, args = { resolutions = [1000000, 2500000], normalization-methods = "INVALID", fail-if-norm-not-found = true } },
    { input-uri = "hic/4DNFIZ1ZVXC8.hic9", format = "hic", output = "test.hic", expect-failure = true, args = { resolutions = [1000000, 2500000] } },
]

[dump]

files = [
    { uri = "cooler/cooler_test_file.cool", format = "cool" },
    { uri = "cooler/multires_cooler_test_file.mcool::/resolutions/100000", format = "cool" },
    { uri = "cooler/single_cell_cooler_test_file.scool::/cells/GSM2687248_41669_ACAGTG-R1-DpnII.100000.cool", format = "cool" },
    { uri = "cooler/multires_cooler_test_file.mcool", format = "mcool" },
    { uri = "cooler/single_cell_cooler_test_file.scool", format = "scool" },
    { uri = "cooler/cooler_variable_bins_test_file.cool", format = "cool", variable-bin-size = true },
    { uri = "hic/4DNFIZ1ZVXC8.hic8", format = "hic", reference-uri = "integration_tests/4DNFIZ1ZVXC8.mcool::/resolutions/100000", resolution = 100000 },
    { uri = "hic/4DNFIZ1ZVXC8.hic9", format = "hic", reference-uri = "integration_tests/4DNFIZ1ZVXC8.mcool::/resolutions/100000", resolution = 100000 },
    { uri = "hic/4DNFIZ1ZVXC8.hic9", format = "hic", reference-uri = "integration_tests/4DNFIZ1ZVXC8.mcool::/resolutions/100000" }
]

queries = [
    { uri = "cooler/cooler_test_file.cool", range1 = "1", range2 = "X" },
    { uri = "cooler/multires_cooler_test_file.mcool::/resolutions/100000", range1 = "1", range2 = "X" },
    { uri = "cooler/single_cell_cooler_test_file.scool::/cells/GSM2687248_41669_ACAGTG-R1-DpnII.100000.cool", range1 = "1", range2 = "X" },
    { uri = "cooler/multires_cooler_test_file.mcool", range1 = "1", range2 = "X" },
    { uri = "cooler/single_cell_cooler_test_file.scool", range1 = "1", range2 = "X" },
    { uri = "cooler/cooler_variable_bins_test_file.cool", range1 = "chr1", range2 = "chr2" },
    { uri = "cooler/ENCFF993FGR.2500000.cool", range1 = "chr1", range2 = "chrX", normalization = "VC" },
    { uri = "hic/4DNFIZ1ZVXC8.hic8", range1 = "chr2L", range2 = "chrX", normalization = "VC" },
    { uri = "hic/4DNFIZ1ZVXC8.hic9", range1 = "chr2L", range2 = "chrX", normalization = "VC" }
]

[metadata]

files = [
    { uri = "cooler/cooler_test_file.cool", format = "cool" },
    { uri = "cooler/multires_cooler_test_file.mcool", format = "mcool" },
    { uri = "cooler/single_cell_cooler_test_file.scool", format = "scool" },
    { uri = "cooler/cooler_variable_bins_test_file.cool", format = "cool", variable-bin-size = true },
    { uri = "hic/4DNFIZ1ZVXC8.hic8", format = "hic" },
    { uri = "hic/4DNFIZ1ZVXC8.hic9", format = "hic" }
]

output-formats = ["json", "toml", "yaml"]

[rename-chromosomes]

files = [
    { uri = "cooler/ENCFF993FGR.2500000.cool", format = "cool" },
    { uri = "cooler/multires_cooler_test_file.mcool", format = "mcool" },
    { uri = "cooler/single_cell_cooler_test_file.scool", format = "scool" },
    { uri = "cooler/single_cell_cooler_test_file.scool::/cells/GSM2687248_41669_ACAGTG-R1-DpnII.100000.cool", format = "cool" },
    { uri = "cooler/cooler_variable_bins_test_file.cool", format = "cool", variable-bin-size = true },
    { uri = "hic/ENCFF993FGR.2500000.hic", format = "hic" }
]

test-cases = [
    { uri = "cooler/ENCFF993FGR.2500000.cool" },
    { uri = "cooler/multires_cooler_test_file.mcool" },
    { uri = "cooler/single_cell_cooler_test_file.scool" },
    { uri = "cooler/single_cell_cooler_test_file.scool::/cells/GSM2687248_41669_ACAGTG-R1-DpnII.100000.cool", expect-failure = true },
    { uri = "cooler/cooler_variable_bins_test_file.cool" },
    { uri = "hic/ENCFF993FGR.2500000.hic", expect-failure = true }
]

name-mappings = [
    { uri = "cooler/ENCFF993FGR.2500000.cool", mappings = { "chr1" = "chrA", "chrX" = "chrB" } },
    { uri = "cooler/multires_cooler_test_file.mcool", mappings = { "1" = "chrA", "X" = "chrB" } },
    { uri = "cooler/single_cell_cooler_test_file.scool", mappings = { "1" = "chrA", "X" = "chrB" } },
    { uri = "cooler/single_cell_cooler_test_file.scool::/cells/GSM2687248_41669_ACAGTG-R1-DpnII.100000.cool", mappings = { "1" = "chrA", "X" = "chrB" } },
    { uri = "cooler/cooler_variable_bins_test_file.cool", mappings = { "chr1" = "chrA", "chr2" = "chrB" } },
    { uri = "hic/ENCFF993FGR.2500000.hic", mappings = { "chr1" = "chrA", "chrX" = "chrB" } }
]

invalid-name-mappings = [
    "chr1 chr2",
    "chr1",
    "chr1\t"
]

[zoomify]

files = [
    { uri = "cooler/ENCFF993FGR.2500000.cool", format = "cool" },
    { uri = "cooler/multires_cooler_test_file.mcool", format = "mcool" },
    { uri = "cooler/single_cell_cooler_test_file.scool", format = "scool" },
    { uri = "cooler/cooler_variable_bins_test_file.cool", format = "cool", variable-bin-size = true },
    { uri = "hic/ENCFF993FGR.2500000.hic", format = "hic" }
]

test-cases = [
    { input-uri = "cooler/ENCFF993FGR.2500000.cool", output = "test.mcool", resolutions = [2500000, 5000000, 10000000] },
    { input-uri = "cooler/ENCFF993FGR.2500000.cool", output = "test.cool", resolutions = [5000000], single-resolution = true, args = { no-copy-base-resolution = "" } },
    { input-uri = "cooler/multires_cooler_test_file.mcool", output = "test.mcool", resolutions = [5000000], expect-failure = true },
    { input-uri = "cooler/single_cell_cooler_test_file.scool", output = "test.mcool", resolutions = [5000000], expect-failure = true },
    { input-uri = "cooler/cooler_variable_bins_test_file.cool", output = "test.mcool", resolutions = [5000000], expect-failure = true },
    { input-uri = "hic/ENCFF993FGR.2500000.hic", reference-uri = "cooler/ENCFF993FGR.2500000.cool", output = "test.hic", resolutions = [2500000, 5000000, 10000000] },
    { input-uri = "hic/ENCFF993FGR.2500000.hic", reference-uri = "cooler/ENCFF993FGR.2500000.cool", output = "test.hic", resolutions = [5000000], single-resolution = true, args = { no-copy-base-resolution = "" } },
]
